# AxelrodSimulation

## 概要
Axelrodの繰り返し囚人のジレンマゲームのシミュレーションを実装した. 

URL : <https://axelrodsimulation.streamlit.app/>

## シミュレーション解説
### 囚人のジレンマゲームの利得表
デフォルトのシミュレーションでは以下の利得表に基づいて, 繰り返し囚人のジレンマゲーム行っている. 

||C|D|
|---|---|---|
|C|(3, 3)|(0, 5)|
|D|(5, 0)|(1, 1)|

### 戦略タイプ
- 悪人戦略[ALLD]
  常に非協力(D)を選ぶ. 
- 善人戦略[ALLC]
  常に協力(C)を選ぶ. 
- しっぺ返し戦略[Tit-For-Tat(TFT)]
  初回は協力を選び, 相手が協力すれば協力(C)を次回選び, 相手が非協力なら非協力(D)を次回選ぶ. 
- 堪忍袋戦略[Tit-For-Two-Tats(TTT)]
  初回は協力(C)を選び, 相手が２回連続で非協力を選んだとき, 非協力(D)を次回選ぶ. 
- パブロフ戦略[Pavlov(PVL)]
  初回はC, 二回目以降は, 前回が（C,C）→C, 前回が（C,D）→D, 前回が（D,C）→D, 前回が（D,D）→C. 

### シミュレーションの流れ
1. プレイヤーを120人とする. 
2. 各プレイヤーには, 以下の中から戦略タイプを均等な割合で割り当てる. 
3. プレイヤーをランダムにシャッフルし, 60組のペアを作成する. 
4. 各ペアで100回繰り返し囚人のジレンマゲームを実行する. 
5. 各プレイヤーのスコアを戦略タイプごとに集計する. 
6. 戦略タイプごとの合計スコアのスコア比に基づいて, 各プレイヤーの戦略タイプを割り当てる. 
7. 2.~6. を20回繰り返す. 

## コード解説
プレイヤー数, 繰り返しゲームの回数, ラウンドの回数, 利得表はWebアプリケーション上で変更可能である. 
よってここでは, 戦略の追加方法のみ解説する. 

### 戦略の追加方法
以下のコードを使用して、新しい戦略クラスを追加する. 

- `__init__`関数は戦略の名前（`NEW`）を登録するために必要. 
他の部分はそのままコピーして使用できる. 
- `choose_action`関数で、自分の考えた戦略タイプを記述する. 
必ず `'C'` または `'D'` を返すこと. 

```python:
class NEW(Strategy):
    def __init__(self) -> None:
        # 戦略の名前を "NEW" として登録
        super().__init__("NEW")

    def choose_action(self, previous_actions: List[Tuple[str, str]]) -> str:
        # ここに 'C' または 'D' を返すような条件を記述
        if not previous_actions:  # 初回の行動を協力に設定
            return 'C'
        return 'D'  # 条件に応じて返す
```

作成した`NEW`戦略をシミュレーションに登録するには,`strategy_classes`に`NEW`を追加
```python:
strategy_classes = {
    "ALLC": ALLC,
    "ALLD": ALLD,
    "TFT": TFT,
    "TTT": TTT,
    "PVL": PVL,
    "NEW": NEW  # 新しい戦略を追加
}
```

```python:
selected_strategy_types = ["ALLC", "ALLD", "TTT", "TFT", "NEW"]

```